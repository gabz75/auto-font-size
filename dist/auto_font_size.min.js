"use strict";angular.module("AutoFontSize",[]).directive("autoFontSize",["$window",function(){return{template:'<div data-role="inner" ng-transclude></div>',transclude:!0,link:{post:function(a,b,c){function d(){var c=0;if(g(),m.height()>0&&m.width()>0)if(i()&&l.shrink)for(;i()&&100>c&&e()>=l.minSize;)f(e()-1),c+=1;else{if(!j()||!l.grow)return;for(;j()&&100>c;)f(e()+1),c+=1}a.$emit("auto-font-size:resized",{fontSize:e(),elem:b})}function e(){var a=m.css("font-size");return Number(a.match(/\d+/)[0])}function f(a){m.css("fontSize",a+"px"),g()}function g(){if(h()){var a=e();m.css("lineHeight",a+2+"px"),m.find("img").height(a+2)}}function h(){return!!m.css("font-size")}function i(){return m.width()>b.width()||m.height()>b.height()}function j(){return m.width()<b.width()||m.height()<b.height()}var k=a.$eval(c.autoFontSize)||{},l=angular.extend({shrink:!0,grow:!0,minSize:1},k),m=b.find("div[data-role]");a.$watch(d)}}}}]);